# 523 - Medium - Continuous SubArray Sum

## 题目要求

## 解题思路

### O(n^2) 的做法

判断在数组 `[23, 2, 4, 6, 7]` 里，有没有子数组（长度大于或等于 2）所有元素的和是 6 的倍数。

这个时候，如果我们去将所有可能的组合的和都算出来，再去求跟 6 的余数来算的话，时间复杂度会为 O(n^2)，

在题目要求的数组长度为 `1 <= nums.length <= 2 * 10^4` 条件下，会超时。

### 前缀和

所以可以用更巧妙的**前缀和**来求。

**前缀和**即，求出 `[23]`, `[23, 2]`， `[23, 2, 4]`， `[23, 2, 4, 6]`， `[23, 2, 4, 6, 7]` 的和。

然后通过两个**前缀和**相减，可以求出任意组合的和。

比如，
求 `[2, 4]` 的和，可以用 `[23, 2, 4]` 的和减去 `[23]` 的和。
求 `[6, 7]` 的和可以用 `[23, 2, 4, 6, 7]` 的和 减去 `[23, 2, 4]` 的和。

### 前缀和在该题中的运用

由前缀和理论可得下面的计算公式：

`(PrefixSum1 - PrefixSum2) % k === 0`

将该公式转换，可以得到下面的公式：

`PrefixSum1 % k === PrefixSum2 % k`

以上是该题的大体的求解思路，但还有一些边缘情况需要处理。

我们用一个 Hash Map 来存储前缀和，

- Map 的 Key 为 `PrefixSum % k`
- Map 的 Value 为当前的 `index`。

### 处理边缘情况

#### PrefixSum2 为空

在判断 `[23, 2, 6, 4, 7]` 数组里，有没有子数组（长度大于或等于 2）所有元素的和是 `6` 的倍数时，

`PrefixSum1` 为 `[23, 2, 6, 4, 7]` 整个数组，`PrefixSum2` 则为空。

再加上该题还需要判断 subArray 的 size 是不是两个元素以上，而这又是通过 index 的差值来判断的，所以我们还需要在 Map 中将空的情况以及其 index 值也存上，即 `map.set(0, -1)`。

#### k === 0 的情况

只有当 `k !== 0` 的时候，才能用 `PrefixSum % k` 来求解。
